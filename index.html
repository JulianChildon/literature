<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AmLit Master - American Literature Study Tool</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Serif+SC:wght@400;700&display=swap');

        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
        }

        .font-serif {
            font-family: 'Noto Serif SC', serif;
        }

        /* Custom Scrollbar hiding */
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
            animation: fadeIn 0.5s ease-out forwards;
        }

        @keyframes bounceShort {
            0%, 100% { transform: translate(-50%, 0); }
            50% { transform: translate(-50%, -5px); }
        }
        .animate-bounce-short {
            animation: bounceShort 1s infinite;
        }
    </style>
</head>
<body class="bg-slate-50 text-gray-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- ICON COMPONENTS (Inline SVGs to replace lucide-react) ---
        const IconBase = ({ size = 24, className = "", children }) => (
            <svg 
                xmlns="http://www.w3.org/2000/svg" 
                width={size} 
                height={size} 
                viewBox="0 0 24 24" 
                fill="none" 
                stroke="currentColor" 
                strokeWidth="2" 
                strokeLinecap="round" 
                strokeLinejoin="round" 
                className={className}
            >
                {children}
            </svg>
        );

        const BookOpen = (props) => (
            <IconBase {...props}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></IconBase>
        );
        const CheckCircle = (props) => (
            <IconBase {...props}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></IconBase>
        );
        const XCircle = (props) => (
            <IconBase {...props}><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></IconBase>
        );
        const Search = (props) => (
            <IconBase {...props}><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></IconBase>
        );
        const FileText = (props) => (
            <IconBase {...props}><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></IconBase>
        );
        const PenTool = (props) => (
            <IconBase {...props}><path d="M12 19l7-7 3 3-7 7-3-3z"/><path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/><path d="M2 2l7.586 7.586"/><circle cx="11" cy="11" r="2"/></IconBase>
        );
        const RotateCcw = (props) => (
            <IconBase {...props}><path d="M1 4v6h6"/><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/></IconBase>
        );
        const Lightbulb = (props) => (
            <IconBase {...props}><line x1="9" y1="18" x2="15" y2="18"/><line x1="10" y1="22" x2="14" y2="22"/><path d="M15.09 14c.18-.98.65-1.74 1.41-2.5A4.65 4.65 0 0 0 16.5 8c0-2.3-1.5-4.5-4.5-4.5S7.5 5.7 7.5 8c0 1.56.5 2.5 2 4.5A5 5 0 0 1 15.09 14z"/></IconBase>
        );
        const Star = (props) => (
            <IconBase {...props}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></IconBase>
        );
        const GraduationCap = (props) => (
            <IconBase {...props}><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c3 3 9 3 12 0v-5"/></IconBase>
        );
        const HelpCircle = (props) => (
            <IconBase {...props}><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12.01" y2="17"/></IconBase>
        );
        const ChevronDown = (props) => (
            <IconBase {...props}><polyline points="6 9 12 15 18 9"/></IconBase>
        );

        // --- DATA SOURCE ---
        const APP_DATA = {
            chapters: [
            {
                id: "IX",
                title: "Chapter IX: Romanticism & Transcendentalism",
                fillInBlanks: [
                {
                    id: "ix-f1",
                    question: "Washington Irving, along with ______ was among the first American writers to earn the international fame in Europe.",
                    answers: ["James Fenimore Cooper"],
                    parts: ["Washington Irving, along with ", " was among the first American writers to earn the international fame in Europe."]
                },
                {
                    id: "ix-f2",
                    question: "The American Romantic Movement gave rise to ______, which was a religious and philosophical movement.",
                    answers: ["transcendentalism"],
                    parts: ["The American Romantic Movement gave rise to ", ", which was a religious and philosophical movement."]
                },
                {
                    id: "ix-f3",
                    question: "Transcendentalists were strong believers in the power of the individual. They stressed the role of ______ and the individual’s ______, and exalted feeling over ______.",
                    answers: ["divinity", "intuition", "reason"],
                    parts: ["Transcendentalists were strong believers in the power of the individual. They stressed the role of ", " and the individual’s ", ", and exalted feeling over ", "."]
                },
                {
                    id: "ix-f4",
                    question: "The representative writers of American Romanticism are Washington Irving, Alan Poe, ______ etc.",
                    answers: ["Nathaniel Hawthorne"],
                    parts: ["The representative writers of American Romanticism are Washington Irving, Alan Poe, ", " etc."]
                },
                {
                    id: "ix-f5",
                    question: "The two monumental works of Transcendentalism are ______'s ______ and ______'s ______.",
                    answers: ["Emerson", "Nature", "Thoreau", "Walden"],
                    parts: ["The two monumental works of Transcendentalism are ", "'s ", " and ", "'s ", "."]
                }
                ],
                multipleChoice: [
                {
                    id: "ix-m1",
                    question: "Who was the principal author of the Declaration of Independence?",
                    options: ["Benjamin Franklin", "Thomas Jefferson", "George Washington", "Washington Irving"],
                    correct: 1
                },
                {
                    id: "ix-m2",
                    question: "To Helen was written by Poe from the inspiration by the beauty of ________.",
                    options: ["Greek beauty Helen", "mother of Poe’s classmate", "water nymph Naiads", "soulful beauty Psyche"],
                    correct: 1 
                },
                {
                    id: "ix-m3",
                    question: "The masters or fathers of American short stories are following writers except ________.",
                    options: ["Washington Irving", "Edgar Allan Poe", "Nathaniel Hawthorne", "H. W. Longfellow"],
                    correct: 3
                },
                {
                    id: "ix-m4",
                    question: "________ is regarded as the “father of American literature”?",
                    options: ["Nathaniel Hawthorne", "James Fenimore Cooper", "Thomas Jefferson", "Washington Irving"],
                    correct: 3
                },
                {
                    id: "ix-m5",
                    question: "What does the ship symbolize in the poem O Captain! My Captain!?",
                    options: ["The Civil War", "The War of Independence", "The United States", "The UK"],
                    correct: 2
                },
                {
                    id: "ix-m6",
                    question: "The scarlet letter “A” on Hester’s dress is a symbol, originally a mark of first letter of ________.",
                    options: ["adulterer", "angel", "ability", "America"],
                    correct: 0
                }
                ]
            },
            {
                id: "X",
                title: "Chapter X: Realism & Naturalism",
                fillInBlanks: [
                {
                    id: "x-f1",
                    question: "Theodore Dreiser was a master of ______ and ______ of modern American novels.",
                    answers: ["naturalism", "realism"],
                    parts: ["Theodore Dreiser was a master of ", " and ", " of modern American novels."]
                },
                {
                    id: "x-f2",
                    question: "______ was Henry James’ favorite theme in his works.",
                    answers: ["International theme"],
                    parts: ["", " was Henry James’ favorite theme in his works."]
                },
                {
                    id: "x-f3",
                    question: "After the Civil War, the ______ and ______ flourished, giving rise to affluent mid-class.",
                    answers: ["industrialization", "mechanization"],
                    parts: ["After the Civil War, the ", " and ", " flourished, giving rise to affluent mid-class."]
                },
                {
                    id: "x-f4",
                    question: "Mark Twain was a great literary giant lauded for his ______ and ______.",
                    answers: ["satire", "wit"],
                    parts: ["Mark Twain was a great literary giant lauded for his ", " and ", "."]
                },
                {
                    id: "x-f5",
                    question: "Kate Chopin is now considered by some to have been a forerunner of the ______ authors of the 20th century.",
                    answers: ["feminist"],
                    parts: ["Kate Chopin is now considered by some to have been a forerunner of the ", " authors of the 20th century."]
                }
                ],
                multipleChoice: [
                {
                    id: "x-m1",
                    question: "Who does not belong to the novelists of Naturalism in the following list?",
                    options: ["Mark Twain", "Theodore Dreiser", "Stephen Crane", "Jack London"],
                    correct: 0
                },
                {
                    id: "x-m2",
                    question: "Theodore Dreiser believed that ________.",
                    options: ["men can control their fate", "man’s fate is controlled by impersonal forces", "men can change their fate by their personal effort", "man’s fate is not predetermined"],
                    correct: 1
                },
                {
                    id: "x-m3",
                    question: "Which of the following is not the work written by Mark Twain?",
                    options: ["The Adventure of Tom Sawyer", "An American Tragedy", "The Man That Corrupted Hadleyburg", "The Gilded Age"],
                    correct: 1
                },
                {
                    id: "x-m4",
                    question: "Kate Chopin’s The Awakening received negative press at her time because ________.",
                    options: ["the story is obscure", "the plot is too complicated", "her writing is terrible", "its theme is far ahead of its time"],
                    correct: 3
                },
                {
                    id: "x-m5",
                    question: "Whom did William Faulkner regard as “the father of American literature”?",
                    options: ["Henry James", "Samuel Langhorne Clemens", "Theodore Dreiser", "Jack London"],
                    correct: 1
                }
                ]
            },
            {
                id: "XI",
                title: "Chapter XI: Modernism & The Lost Generation",
                fillInBlanks: [
                {
                    id: "xi-f1",
                    question: "American writers after World War I self-consciously acknowledged that they were the “______”, devoid of faith and alienated from the Western civilization.",
                    answers: ["Lost Generation"],
                    parts: ["American writers after World War I self-consciously acknowledged that they were the “", "”, devoid of faith and alienated from the Western civilization."]
                },
                {
                    id: "xi-f2",
                    question: "______’s drama marks the coming of the age of American drama.",
                    answers: ["Eugene O’Neil"],
                    parts: ["", "’s drama marks the coming of the age of American drama."]
                }
                ],
                multipleChoice: [
                {
                    id: "xi-m1",
                    question: "Which of the following figures does not belong to the Lost Generation?",
                    options: ["Ezra Pound", "William Carlos Williams", "Ernest Hemingway", "Theodore Dreiser"],
                    correct: 3
                },
                {
                    id: "xi-m2",
                    question: "The following writers were awarded Nobel Prize in Literature except for ________.",
                    options: ["William Faulkner", "F. Scott Fitzgerald", "John Steinbeck", "Ernest Hemingway"],
                    correct: 1
                },
                {
                    id: "xi-m3",
                    question: "In Faulkner’s novel The Sound and the Fury, he used a typical technique called ________.",
                    options: ["stream of consciousness", "imagism", "symbolism", "naturalism"],
                    correct: 0
                },
                {
                    id: "xi-m4",
                    question: "What does the jar in Anecdote of the Jar symbolize?",
                    options: ["Ground and hill", "Artistic imagination/Order", "Disordered wilderness", "Bird or bush"],
                    correct: 1
                },
                {
                    id: "xi-m5",
                    question: "The two striking contrast words in The Red Wheelbarrow are ________.",
                    options: ["red and white", "water and rain", "rain and barrow", "glazed and red"],
                    correct: 0
                }
                ]
            }
            ],
            definitions: [
            {
                term: "Romanticism",
                definition: "A reaction against Neoclassicism. This early 19th-century movement elevated the individual, the passions, and the inner life. It stressed strong emotion, imagination, freedom from classical correctness in art forms, and rebellion against social conventions."
            },
            {
                term: "American Realism",
                definition: "A style in art, music and literature that depicted contemporary social realities and the lives and everyday activities of ordinary people. The movement began in literature in the mid-19th century; American realist works attempted to define what was real."
            },
            {
                term: "Modernism",
                definition: "An international cultural movement after World War I, expressing disillusionment with tradition and interest in new technologies and visions. Writers sought to find new ways of expression and a break from the literary tradition of the 19th century."
            },
            {
                term: "American Renaissance",
                definition: "A period of American architecture and the arts from 1876 to 1917, characterized by renewed national self-confidence and a feeling that the United States was the heir to Greek democracy, Roman law, and Renaissance humanism."
            },
            {
                term: "Free verse",
                definition: "Poetry that is written without proper rules about form, rhyme, rhythm, meter, etc."
            },
            {
                term: "Jazz Age literature",
                definition: "Popularized by F. Scott Fitzgerald, it captures the hedonism, disillusionment, and cultural explosion of the 1920s, focusing on 'Lost Generation' expatriates, flapper culture, and the Harlem Renaissance."
            }
            ],
            translations: [
            {
                title: "The Scarlet Letter (Excerpt)",
                segments: [
                { en: "The young woman was tall, with a figure of perfect elegance on a large scale.", cn: "那年轻女人身材高大，体态优美，落落大方。" },
                { en: "She had dark and abundant hair, so glossy that it threw off the sunshine with a gleam, and a face which, besides being beautiful from regularity of feature and richness of complexion, had the impressiveness belonging to a marked brow and deep black eyes.", cn: "她那一头乌黑浓密的秀发，光亮得足以反射出闪烁的阳光；她的脸庞，除了因五官端正、气色红润而美丽动人外，那一双浓密的眉毛和深邃的黑眼睛，更赋予她一种令人过目不忘的英气。" },
                { en: "She was ladylike, too, after the manner of the feminine gentility of those days; characterised by a certain state and dignity, rather than by the delicate, evanescent, and indescribable grace, which is now recognised as its indication.", cn: "她还表现出那个时代女性温文尔雅的气派；这种气派的特点是某种庄重与尊严，而非现代所公认的那种纤弱、飘逸且难以言表的优雅。" },
                { en: "And never had Hester Prynne appeared more ladylike, in the antique interpretation of the term, than as she issued from the prison.", cn: "当海斯特·白兰走出监狱时，从未像现在这样符合“淑女”一词的古老定义。" },
                { en: "Those who had before known her, and had expected to behold her dimmed and obscured by a disastrous cloud, were astonished, and even startled, to perceive how her beauty shone out, and made a halo of the misfortune and ignominy in which she was enveloped.", cn: "那些以前认识她、本以为会看到她被灾难的阴云所笼罩而变得灰暗憔悴的人们，惊讶甚至震惊地发现，她的美反而焕发出光彩，使她身陷其中的不幸与耻辱反倒成了一道光环。" },
                { en: "It may be true, that, to a sensitive observer, there was something exquisitely painful in it.", cn: "也许在敏感的观察者看来，这种美中带有一种极其痛苦的意味。" },
                { en: "Her attire, which, indeed, she had wrought for the occasion, in prison, and had modelled much after her own fancy, seemed to express the attitude of her spirit, the desperate recklessness of her mood, by its wild and picturesque peculiarity.", cn: "她的服装确实是在狱中为这一场合亲手缝制的，很大程度上是随心所欲设计的，其狂野而独特的风格似乎表达了她内心的态度，即一种绝望而鲁莽的心情。" },
                { en: "But the point which drew all eyes, and, as it were, transfigured the wearer—so that both men and women, who had been familiarly acquainted with Hester Prynne, were now impressed as if they beheld her for the first time—was that SCARLET LETTER, so fantastically embroidered and illuminated upon her bosom.", cn: "但最引人注目、并仿佛使她整个人变了样——以至于熟悉海斯特·白兰的男女老少，此刻都仿佛第一次见到她一样——的是她胸前那枚红字，刺绣得如此精美瑰奇，在胸前闪闪发光。" },
                { en: "It had the effect of a spell, taking her out of the ordinary relations with humanity, and enclosing her in a sphere by herself.", cn: "它产生了一种咒语般的效果，使她脱离了与人类的正常联系，将她封闭在一个属于她自己的领域里。" }
                ]
            },
            {
                title: "The Story of an Hour (Excerpt)",
                segments: [
                { en: "There stood, facing the open window, a comfortable, roomy armchair.", cn: "面对着敞开的窗户，放着一把宽大舒适的扶手椅。" },
                { en: "Into this she sank, pressed down by a physical exhaustion that haunted her body and seemed to reach into her soul.", cn: "她瘫坐在椅子里，身体被一种疲惫感压垮了，这种疲惫萦绕着她的肉体，似乎还触及到了她的灵魂。" },
                { en: "She could see in the open square before her house the tops of trees that were all aquiver with the new spring life.", cn: "透过屋前开阔的广场，她可以看到树梢因为春天的新生而微微颤动。" },
                { en: "The delicious breath of rain was in the air.", cn: "空气中弥漫着雨后沁人心脾的气息。" },
                { en: "In the street below a peddler was crying his wares.", cn: "楼下的街道上，一个小贩正在大声叫卖他的商品。" },
                { en: "The notes of a distant song which someone was singing reached her faintly, and countless sparrows were twittering in the leaves.", cn: "远处有人歌唱的旋律隐约传到她耳边，无数的麻雀在树叶间啁啾鸣叫。" },
                { en: "There were patches of blue sky showing here and there through the clouds that had met and piled one above the other in the west facing her window.", cn: "在她窗口正对着的西方，云层汇聚堆叠，其间不时露出一抹抹蔚蓝的天空。" }
                ]
            },
            {
                title: "Rip Van Winkle (Excerpt)",
                segments: [
                { en: "On the other side he looked down into a deep mountain glen, wild, lonely, and shagged, the bottom filled with fragments from the impending cliffs, and scarcely lighted by the reflected rays of the setting sun.", cn: "在山的另一边，他俯瞰着一个深邃的山谷，那里荒凉、孤独、草木杂乱，谷底堆满了从险峻悬崖上滚落的碎石，落日的余晖几乎无法映照进这片幽暗之地。" },
                { en: "For some time Rip lay musing on this scene; evening was gradually advancing; the mountains began to throw their long blue shadows over the valleys; he saw that it would be dark long before he could reach the village; and he heaved a heavy sigh when he thought of encountering the terrors of Dame Van Winkle.", cn: "瑞普躺在那里对着这番景象沉思了许久；暮色渐渐降临，群山开始在峡谷中投下长长的蓝色阴影；他意识到，还没等他赶回村子天就要黑透了，一想到回家又要面对可怕的范·温克尔太太，他不禁沉沉地叹了口气。" }
                ]
            }
            ],
            studyNotes: [
            {
                title: "The Road Not Taken (《未选择的路》)",
                author: "Robert Frost (罗伯特·弗罗斯特)",
                tags: ["Modern Poetry", "Existentialism"],
                content: [
                "地位：美国国民诗人 Robert Frost 的名诗。",
                "考点预测：极大概率考查原文填空或者主题分析。",
                "核心主题：人生的选择 (Choices)、存在主义色彩 (Existentialism)。",
                "备考重点：理解诗歌中关于选择的隐喻，以及对“未选择的路”的思考。"
                ],
                qa: [
                { q: "What does the yellow wood mean in the first line?", a: "It symbolizes autumn, representing a season of change or a mature stage in life where choices must be made." },
                { q: "What is the speaker sorry for?", a: "He is sorry that he cannot travel both roads simultaneously while being one traveler." },
                { q: "What might the roads stand for in the poem?", a: "The roads stand for the different choices, paths, or directions one can take in life." },
                { q: "Why does the second road have the better claim?", a: "Because it was grassy and wanted wear, meaning it was less traveled and perhaps more inviting." },
                { q: "Why should the speaker tell this with a “sigh”?", a: "The sigh suggests a mix of nostalgia, regret for the path not taken, or simple acceptance of the finality of his choice." },
                { q: "Does the speaker think he makes a wrong choice?", a: "It is ambiguous; he simply notes it 'made all the difference,' implying the choice was significant regardless of whether it was right or wrong." },
                { q: "What would the poet like to convey to us?", a: "That life is full of difficult choices that define our future, and we can never truly know where the other path might have led." }
                ]
            },
            {
                title: "Rip Van Winkle (《瑞普·凡·温克尔》)",
                author: "Washington Irving (华盛顿·欧文)",
                tags: ["Short Story", "Romanticism", "Father of American Lit"],
                content: [
                "作者简介：华盛顿·欧文 (Washington Irving)，被称为“美国文学之父”。",
                "文体特点 (Style) - 必考词汇：",
                "1. Simplicity (简洁)",
                "2. Lucidity (清晰) *笔记强调：曾误写为tudidity后改正，务必拼写正确。",
                "3. Innovative (创新)",
                "板块归属：早期短篇小说（浪漫主义先驱），考查美国本土文学的兴起。"
                ],
                qa: [
                { q: "Why would Rip Van Winkle like to go out?", a: "To escape his wife's sharp tongue and the labor of his farm." },
                { q: "What do you think of the dog, Wolf?", a: "Wolf was Rip's sole domestic adherent, also henpecked and terrified of Dame Van Winkle." },
                { q: "What did Rip hear and who did he meet in the mountain?", a: "He heard his name called and met a short, square-built old fellow with thick bushy hair and a grizzled beard." },
                { q: "What happened to Rip in the mountain then?", a: "He drank the liquor offered by the strangers and fell into a deep sleep for twenty years." },
                { q: "What did Rip see on waking?", a: "He found his gun rusted, his dog gone, and his joints stiff." },
                { q: "What did Rip see when he came home?", a: "He saw his house gone to decay, the village grown larger, and the Union Hotel replacing the old inn." }
                ]
            },
            {
                title: "Sister Carrie (《嘉莉妹妹》)",
                author: "Theodore Dreiser (西奥多·德莱塞)",
                tags: ["Novel", "Naturalism", "American Dream"],
                content: [
                "流派：自然主义 (Naturalism) 的代表作。",
                "记忆技巧：笔记中修正了 'Sister' 和 'Carrie'，考试时注意书名书写。",
                "三要素记忆法：看到《嘉莉妹妹》 -> 必须反应出 'Dreiser' 和 'Naturalism'。",
                "考点预测：环境决定论 (Environment determinism) 以及对美国梦的解构。"
                ],
                qa: [
                { q: "How old was Sister Carrie when she first went to Chicago?", a: "She was eighteen years of age." },
                { q: "Why did Carrie make her trip to Chicago?", a: "She was full of the illusions of ignorance and youth, seeking better fortune than her hometown offered." },
                { q: "What is your impression on Sister Carrie?", a: "She represents the 'waif amid forces,' naive, ambitious, yet vulnerable to the overwhelming power of the city." },
                { q: "What is the writing style that the author uses in this part?", a: "The style is realistic and naturalistic, focusing on detailed observation of environment and social forces." },
                { q: "What ways would young girls find when they left hometown for big city?", a: "They could either fall into degradation or rise by virtue/labor, but often found a middle ground of struggle." },
                { q: "What was the society like according to this part?", a: "It was a cold, industrial capitalist society where the individual was insignificant against the vast social machine." }
                ]
            },
            {
                title: "The Great Gatsby (《了不起的盖茨比》)",
                author: "F. Scott Fitzgerald (F. 斯科特·菲茨杰拉德)",
                tags: ["Novel", "Jazz Age", "Modernism"],
                content: [
                "板块归属：爵士时代 (Jazz Age) / 现代主义。",
                "核心考点：Theme (主题)。笔记特别标注。",
                "主题关键词：美国梦的破灭 (Disillusionment of American Dream)、爵士时代的空虚。",
                "备考方向：通常是论述题重点，需大段背诵相关主题分析。"
                ],
                qa: [
                { q: "What is the color of Nick's clothes when he goes to the party?", a: "He is dressed in white flannels." },
                { q: "Why do some of the guests go to the party uninvitedly?", a: "They are attracted by the spectacle, the free hospitality, and the moths-to-a-flame allure of wealth." },
                { q: "What is the implication of the description of the party?", a: "It implies the superficiality, moral decay, and hedonistic excess of the Jazz Age society." },
                { q: "What is the implication of the extravagant parties?", a: "They reflect Gatsby's desperate, ostentatious attempt to fill a void and attract Daisy's attention." },
                { q: "What is the aim of Gatsby holding the parties?", a: "He holds them in the singular hope that Daisy might one day wander in." },
                { q: "What is the relationship between Nick and Gatsby? Do you think they had known each other before?", a: "They are neighbors and war veterans; they served in the same division but had not met before that summer." }
                ]
            },
            {
                title: "★ 考试策略与备考总纲",
                author: "Exam Strategy",
                tags: ["Strategy", "Must Read"],
                isHighlight: true,
                content: [
                "1. 得“大题”者得天下：名词解释 (30分) + 简答/论述 (约30分) > 60%。必须背诵大段文学术语定义和作品分析。",
                "2. 死记硬背关键词：如华盛顿·欧文的 Simplicity, Lucidity。精准使用文学批评术语得分很高。",
                "3. 三要素记忆法：应对客观题的万能公式 -> “书名 + 作者 + 思想流派”。",
                "4. 复习重点：笔记重点标记了拼写修改痕迹，考试中绝对不能拼错人名和术语。"
                ]
            }
            ]
        };

        // --- COMPONENTS ---

        // 1. Navigation Header
        const Header = ({ currentTab, setTab }) => (
            <header className="bg-indigo-700 text-white shadow-lg sticky top-0 z-50">
            <div className="max-w-6xl mx-auto px-4 py-4 flex flex-col md:flex-row justify-between items-center">
                <div className="flex items-center space-x-2 mb-4 md:mb-0">
                <BookOpen size={28} />
                <h1 className="text-2xl font-bold tracking-tight">AmLit Master</h1>
                </div>
                <nav className="flex space-x-2 bg-indigo-800 p-1 rounded-lg">
                <button
                    onClick={() => setTab('quiz')}
                    className={`flex items-center px-4 py-2 rounded-md transition-all ${currentTab === 'quiz' ? 'bg-white text-indigo-900 shadow-sm font-medium transform scale-105' : 'text-indigo-200 hover:text-white hover:bg-indigo-600'}`}
                >
                    <PenTool size={18} className="mr-2" />
                    练习题库
                </button>
                <button
                    onClick={() => setTab('reference')}
                    className={`flex items-center px-4 py-2 rounded-md transition-all ${currentTab === 'reference' ? 'bg-white text-indigo-900 shadow-sm font-medium transform scale-105' : 'text-indigo-200 hover:text-white hover:bg-indigo-600'}`}
                >
                    <FileText size={18} className="mr-2" />
                    资料库
                </button>
                </nav>
            </div>
            </header>
        );

        // 2. Quiz Section
        const QuizSection = () => {
            const [activeChapterIndex, setActiveChapterIndex] = useState(0);
            const [answers, setAnswers] = useState({});
            const [results, setResults] = useState({});
            const [showResults, setShowResults] = useState(false);

            const activeChapter = APP_DATA.chapters[activeChapterIndex];

            // Reset when chapter changes
            useEffect(() => {
            setAnswers({});
            setResults({});
            setShowResults(false);
            }, [activeChapterIndex]);

            const handleFillChange = (qId, partIndex, value) => {
            setAnswers(prev => ({
                ...prev,
                [`${qId}-${partIndex}`]: value
            }));
            };

            const handleMultiChoiceChange = (qId, optionIndex) => {
            setAnswers(prev => ({
                ...prev,
                [qId]: optionIndex
            }));
            };

            const checkAnswers = () => {
            const newResults = {};
            let correctCount = 0;
            let totalCount = 0;

            // Check Fill in Blanks
            activeChapter.fillInBlanks.forEach(q => {
                q.answers.forEach((ans, idx) => {
                totalCount++;
                const userAns = (answers[`${q.id}-${idx}`] || "").trim().toLowerCase();
                const correctAns = ans.trim().toLowerCase();
                // Simple heuristic: correct if contains the key word roughly
                const isCorrect = userAns === correctAns || (userAns.length > 3 && correctAns.includes(userAns)); 
                newResults[`${q.id}-${idx}`] = isCorrect;
                if(isCorrect) correctCount++;
                });
            });

            // Check Multiple Choice
            activeChapter.multipleChoice.forEach(q => {
                totalCount++;
                const userAns = answers[q.id];
                const isCorrect = userAns === q.correct;
                newResults[q.id] = isCorrect;
                if(isCorrect) correctCount++;
            });

            setResults(newResults);
            setShowResults(true);
            };

            const resetQuiz = () => {
            setAnswers({});
            setResults({});
            setShowResults(false);
            };

            return (
            <div className="max-w-4xl mx-auto p-4 animate-fadeIn">
                {/* Chapter Selection */}
                <div className="flex overflow-x-auto space-x-2 mb-6 pb-2 border-b border-gray-200 scrollbar-hide">
                {APP_DATA.chapters.map((chap, idx) => (
                    <button
                    key={chap.id}
                    onClick={() => setActiveChapterIndex(idx)}
                    className={`whitespace-nowrap px-4 py-2 rounded-full text-sm font-medium transition-all ${
                        activeChapterIndex === idx
                        ? 'bg-indigo-600 text-white shadow-md transform scale-105'
                        : 'bg-white text-gray-600 hover:bg-gray-100 border border-gray-200'
                    }`}
                    >
                    {chap.title}
                    </button>
                ))}
                </div>

                <div className="bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden">
                <div className="p-6 bg-indigo-50 border-b border-indigo-100 flex justify-between items-center">
                    <h2 className="text-xl font-bold text-indigo-900">{activeChapter.title}</h2>
                    {showResults && (
                    <span className={`text-sm font-bold px-4 py-1.5 rounded-full shadow-sm ${
                        Object.values(results).filter(Boolean).length === Object.keys(results).length 
                        ? 'bg-green-100 text-green-700' 
                        : 'bg-indigo-100 text-indigo-700'
                    }`}>
                        Score: {Object.values(results).filter(Boolean).length} / {Object.keys(results).length}
                    </span>
                    )}
                </div>

                <div className="p-6 space-y-10">
                    
                    {/* Section I: Fill in the Blanks */}
                    <section>
                    <h3 className="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                        <span className="bg-indigo-100 text-indigo-700 w-8 h-8 rounded-full flex items-center justify-center mr-3 text-sm font-bold">I</span>
                        Fill in the Blanks
                    </h3>
                    <div className="space-y-6">
                        {activeChapter.fillInBlanks.map((q, qIdx) => (
                        <div key={q.id} className="text-gray-700 leading-loose bg-gray-50 p-5 rounded-xl border border-gray-100">
                            <span className="font-bold text-gray-400 mr-2">{qIdx + 1}.</span>
                            {q.parts.map((part, pIdx) => (
                            <React.Fragment key={pIdx}>
                                <span>{part}</span>
                                {pIdx < q.parts.length - 1 && (
                                <span className="inline-block mx-1 relative">
                                    <input
                                    type="text"
                                    value={answers[`${q.id}-${pIdx}`] || ''}
                                    onChange={(e) => handleFillChange(q.id, pIdx, e.target.value)}
                                    disabled={showResults}
                                    className={`border-b-2 px-2 py-0.5 outline-none w-36 text-center font-medium transition-all rounded-t-md ${
                                        showResults
                                        ? results[`${q.id}-${pIdx}`]
                                            ? 'border-green-500 text-green-700 bg-green-50'
                                            : 'border-red-500 text-red-700 bg-red-50'
                                        : 'border-gray-300 focus:border-indigo-500 focus:bg-indigo-50 bg-white'
                                    }`}
                                    />
                                    {showResults && !results[`${q.id}-${pIdx}`] && (
                                    <div className="absolute top-full left-1/2 transform -translate-x-1/2 mt-2 text-xs bg-red-600 text-white px-3 py-1.5 rounded-md shadow-lg z-10 whitespace-nowrap animate-bounce-short">
                                        <div className="absolute -top-1 left-1/2 transform -translate-x-1/2 w-2 h-2 bg-red-600 rotate-45"></div>
                                        Ans: {q.answers[pIdx]}
                                    </div>
                                    )}
                                </span>
                                )}
                            </React.Fragment>
                            ))}
                        </div>
                        ))}
                    </div>
                    </section>

                    {/* Section II: Multiple Choice */}
                    <section>
                    <h3 className="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                        <span className="bg-indigo-100 text-indigo-700 w-8 h-8 rounded-full flex items-center justify-center mr-3 text-sm font-bold">II</span>
                        Multiple Choice
                    </h3>
                    <div className="space-y-4">
                        {activeChapter.multipleChoice.map((q, qIdx) => {
                        const isCorrect = showResults && results[q.id];
                        const isWrong = showResults && !isCorrect;
                        return (
                            <div key={q.id} className={`p-5 rounded-xl border transition-all ${isCorrect ? 'border-green-200 bg-green-50/50' : isWrong ? 'border-red-200 bg-red-50/50' : 'border-gray-100 bg-gray-50 hover:bg-gray-100'}`}>
                            <p className="font-medium text-gray-800 mb-4">
                                <span className="mr-2 text-gray-400 font-bold">{qIdx + 1}.</span>
                                {q.question}
                            </p>
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-3 ml-6">
                                {q.options.map((opt, optIdx) => (
                                <label 
                                    key={optIdx} 
                                    className={`flex items-center space-x-3 cursor-pointer p-3 rounded-lg border transition-all ${
                                    showResults && q.correct === optIdx 
                                        ? 'bg-green-100 border-green-300 ring-1 ring-green-300' 
                                        : answers[q.id] === optIdx
                                        ? 'bg-indigo-50 border-indigo-300 ring-1 ring-indigo-300'
                                        : 'bg-white border-gray-200 hover:border-indigo-200'
                                    }`}
                                >
                                    <div className={`w-5 h-5 rounded-full border flex items-center justify-center flex-shrink-0 ${
                                    answers[q.id] === optIdx 
                                        ? 'border-indigo-600' 
                                        : 'border-gray-300'
                                    }`}>
                                    {answers[q.id] === optIdx && <div className="w-2.5 h-2.5 bg-indigo-600 rounded-full" />}
                                    </div>
                                    <input
                                    type="radio"
                                    name={q.id}
                                    className="hidden"
                                    value={optIdx}
                                    checked={answers[q.id] === optIdx}
                                    onChange={() => handleMultiChoiceChange(q.id, optIdx)}
                                    disabled={showResults}
                                    />
                                    <span className={`text-sm ${
                                    showResults && q.correct === optIdx ? 'font-bold text-green-800' : 'text-gray-700'
                                    }`}>
                                    <span className="font-mono mr-1 opacity-70">{String.fromCharCode(65 + optIdx)}.</span> {opt}
                                    </span>
                                    {showResults && q.correct === optIdx && <CheckCircle size={16} className="text-green-600 ml-auto" />}
                                    {showResults && answers[q.id] === optIdx && q.correct !== optIdx && <XCircle size={16} className="text-red-600 ml-auto" />}
                                </label>
                                ))}
                            </div>
                            </div>
                        );
                        })}
                    </div>
                    </section>

                    {/* Actions */}
                    <div className="flex justify-end space-x-4 pt-6 border-t border-gray-100">
                    {showResults ? (
                        <button
                        onClick={resetQuiz}
                        className="flex items-center px-6 py-2.5 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors shadow-md active:transform active:scale-95"
                        >
                        <RotateCcw size={18} className="mr-2" />
                        重置试题 (Reset)
                        </button>
                    ) : (
                        <button
                        onClick={checkAnswers}
                        className="flex items-center px-8 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors shadow-md font-semibold active:transform active:scale-95"
                        >
                        提交答案 (Submit)
                        </button>
                    )}
                    </div>
                </div>
                </div>
            </div>
            );
        };

        // 3. Reference Section
        const ReferenceSection = () => {
            const [searchTerm, setSearchTerm] = useState("");
            // Add toggle state for sections
            const [sectionsOpen, setSectionsOpen] = useState({
                notes: true,
                definitions: true,
                translations: true
            });

            const toggleSection = (section) => {
                setSectionsOpen(prev => ({ ...prev, [section]: !prev[section] }));
            };

            const filteredDefinitions = APP_DATA.definitions.filter(d => 
            d.term.toLowerCase().includes(searchTerm.toLowerCase()) || 
            d.definition.toLowerCase().includes(searchTerm.toLowerCase())
            );

            const filteredNotes = APP_DATA.studyNotes.filter(n =>
            n.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
            n.author.toLowerCase().includes(searchTerm.toLowerCase()) ||
            n.content.some(c => c.toLowerCase().includes(searchTerm.toLowerCase()))
            );

            return (
            <div className="max-w-6xl mx-auto p-4 space-y-8 animate-fadeIn">
                {/* Search */}
                <div className="relative max-w-2xl mx-auto">
                <div className="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                    <Search size={22} className="text-indigo-400" />
                </div>
                <input
                    type="text"
                    placeholder="搜索作品、术语、作者或翻译..."
                    className="w-full pl-12 pr-4 py-4 rounded-2xl border border-gray-200 focus:border-indigo-500 focus:ring-4 focus:ring-indigo-100 outline-none transition-all shadow-sm text-lg"
                    value={searchTerm}
                    onChange={(e) => setSearchTerm(e.target.value)}
                />
                </div>

                {/* New Section: Study Notes & Analysis */}
                <div className="space-y-6">
                <div 
                    className="flex items-center justify-between text-indigo-900 border-b-2 border-indigo-100 pb-2 cursor-pointer hover:bg-indigo-50/50 transition-colors rounded-t-lg p-2"
                    onClick={() => toggleSection('notes')}
                >
                    <div className="flex items-center space-x-2">
                        <GraduationCap size={28} className="text-indigo-600" />
                        <h2 className="text-2xl font-bold">重点作品赏析与备考 (Analysis & Exam Notes)</h2>
                    </div>
                    <ChevronDown size={24} className={`text-indigo-400 transform transition-transform duration-300 ${sectionsOpen.notes ? 'rotate-180' : ''}`} />
                </div>

                {sectionsOpen.notes && (
                    <div className="grid md:grid-cols-2 lg:grid-cols-2 gap-6 animate-fadeIn">
                        {filteredNotes.map((note, idx) => (
                        <div key={idx} className={`p-6 rounded-xl border transition-all hover:shadow-lg flex flex-col ${note.isHighlight ? 'bg-indigo-50 border-indigo-200 ring-1 ring-indigo-200 col-span-full' : 'bg-white border-gray-100 shadow-sm'}`}>
                            <div className="flex justify-between items-start mb-3">
                            <h3 className="font-bold text-lg text-indigo-800">{note.title}</h3>
                            {note.isHighlight && <Star size={20} className="text-yellow-500 fill-current" />}
                            </div>
                            <p className="text-sm text-gray-500 font-medium mb-4 flex items-center">
                            <span className="w-2 h-2 rounded-full bg-indigo-400 mr-2"></span>
                            {note.author}
                            </p>
                            
                            {/* Tags */}
                            {note.tags && (
                                <div className="flex flex-wrap gap-2 mb-4">
                                {note.tags.map((tag, tIdx) => (
                                    <span key={tIdx} className="px-2 py-1 bg-white border border-gray-200 rounded text-xs text-gray-600 font-medium">
                                    {tag}
                                    </span>
                                ))}
                                </div>
                            )}

                            {/* Notes Content */}
                            <ul className="space-y-2 mb-6 flex-grow">
                                {note.content.map((line, lIdx) => (
                                <li key={lIdx} className="text-sm text-gray-700 leading-relaxed flex items-start">
                                    <span className="mr-2 text-indigo-400 mt-1">•</span>
                                    {line}
                                </li>
                                ))}
                            </ul>

                            {/* New QA Section */}
                            {note.qa && (
                                <div className="mt-4 pt-4 border-t border-dashed border-gray-200">
                                <h4 className="flex items-center text-sm font-bold text-gray-800 mb-3">
                                    <HelpCircle size={16} className="mr-2 text-indigo-500" />
                                    Key Questions & Answers
                                </h4>
                                <div className="space-y-3">
                                    {note.qa.map((qaItem, qIdx) => (
                                    <div key={qIdx} className="bg-gray-50 p-3 rounded-lg border border-gray-100">
                                        <p className="text-sm font-semibold text-indigo-900 mb-1">Q: {qaItem.q}</p>
                                        <p className="text-sm text-gray-600 pl-4 border-l-2 border-green-400">A: {qaItem.a}</p>
                                    </div>
                                    ))}
                                </div>
                                </div>
                            )}
                        </div>
                        ))}
                    </div>
                )}
                </div>

                <div className="grid md:grid-cols-2 gap-8">
                {/* Definitions Column */}
                <div className="space-y-6">
                    <div 
                        className="flex items-center justify-between text-indigo-900 border-b border-indigo-200 pb-2 cursor-pointer hover:bg-indigo-50/50 transition-colors rounded-t-lg p-2"
                        onClick={() => toggleSection('definitions')}
                    >
                        <div className="flex items-center space-x-2">
                            <BookOpen size={24} />
                            <h2 className="text-xl font-bold">名词解释 (Definitions)</h2>
                        </div>
                        <ChevronDown size={24} className={`text-indigo-400 transform transition-transform duration-300 ${sectionsOpen.definitions ? 'rotate-180' : ''}`} />
                    </div>
                    
                    {sectionsOpen.definitions && (
                        <div className="space-y-4 animate-fadeIn">
                        {filteredDefinitions.length > 0 ? filteredDefinitions.map((item, idx) => (
                            <div key={idx} className="bg-white p-5 rounded-lg shadow-sm border border-gray-100 hover:shadow-md transition-shadow group">
                            <h3 className="font-bold text-lg text-indigo-700 mb-2 group-hover:text-indigo-600">{item.term}</h3>
                            <p className="text-gray-600 leading-relaxed text-sm">{item.definition}</p>
                            </div>
                        )) : (
                            <p className="text-gray-400 italic text-center py-8">No terms found matching your search.</p>
                        )}
                        </div>
                    )}
                </div>

                {/* Translation Column */}
                <div className="space-y-6">
                    <div 
                        className="flex items-center justify-between text-indigo-900 border-b border-indigo-200 pb-2 cursor-pointer hover:bg-indigo-50/50 transition-colors rounded-t-lg p-2"
                        onClick={() => toggleSection('translations')}
                    >
                        <div className="flex items-center space-x-2">
                            <FileText size={24} />
                            <h2 className="text-xl font-bold">翻译对照 (Translations)</h2>
                        </div>
                        <ChevronDown size={24} className={`text-indigo-400 transform transition-transform duration-300 ${sectionsOpen.translations ? 'rotate-180' : ''}`} />
                    </div>

                    {sectionsOpen.translations && (
                        <div className="space-y-4 animate-fadeIn">
                        {APP_DATA.translations.map((text, tIdx) => (
                            <div key={tIdx} className="bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden group hover:shadow-md transition-shadow">
                            <div className="bg-gray-50 px-5 py-3 border-b border-gray-100 font-bold text-gray-700 flex justify-between items-center">
                                {text.title}
                                <Lightbulb size={16} className="text-gray-400 group-hover:text-indigo-500 transition-colors" />
                            </div>
                            <div className="divide-y divide-gray-100">
                                {text.segments.map((seg, sIdx) => {
                                // Simple filter for translation content
                                if (searchTerm && !seg.en.toLowerCase().includes(searchTerm.toLowerCase()) && !seg.cn.includes(searchTerm)) {
                                    return null;
                                }
                                return (
                                    <div key={sIdx} className="p-4 hover:bg-indigo-50/30 transition-colors">
                                    <p className="text-gray-800 font-serif mb-2 leading-relaxed">{seg.en}</p>
                                    <p className="text-gray-600 text-sm border-l-4 border-indigo-300 pl-3 leading-relaxed bg-gray-50/50 py-1">{seg.cn}</p>
                                    </div>
                                );
                                })}
                            </div>
                            </div>
                        ))}
                        </div>
                    )}
                </div>
                </div>
            </div>
            );
        };

        // 4. Main App
        const App = () => {
            const [currentTab, setCurrentTab] = useState('quiz'); // 'quiz' | 'reference'

            return (
            <div className="min-h-screen bg-slate-50 text-gray-900 font-sans">
                <Header currentTab={currentTab} setTab={setCurrentTab} />
                
                <main className="py-6">
                {currentTab === 'quiz' ? <QuizSection /> : <ReferenceSection />}
                </main>
                
                <footer className="text-center text-gray-400 text-sm py-8 border-t border-gray-200 mt-8">
                <p>© 2024 American Literature Study Tool</p>
                <p className="text-xs mt-1 text-gray-300">Designed for Literature Review & Exam Prep</p>
                </footer>
            </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>